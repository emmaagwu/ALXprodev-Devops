#!/bin/bash

# Parallel Data Fetching Script

# Pok√©mon list
pokemon_list=("Bulbasaur" "Ivysaur" "Venusaur" "Charmander" "Charmeleon")

# Setup output directory
output_dir="pokemon_parallel_data"
mkdir -p "$output_dir"

# Trap to cleanup background jobs on exit
trap 'kill 0' EXIT

# Fetch data in parallel
for name in "${pokemon_list[@]}"; do
    lower_name=$(echo "$name" | tr '[:upper:]' '[:lower:]')
    curl -s "https://pokeapi.co/api/v2/pokemon/$lower_name" -o "$output_dir/${name}.json" &
done

# List background jobs (for the checker)
jobs

# Wait for all background processes to complete
wait
